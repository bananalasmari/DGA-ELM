<div class="page-layout">
  <div class="container">
    <div class="row flex-center">
      <div class="col-md-11">
        <div class="app-card flex-column w-100 bg-white">
          <div class="top-section p-4">
            <h3>{{ title }}</h3>
          </div>
          <div class="row">
            <div class="text-center">
              <div class="flex-center items-center _pattern_1yita_1 py-6">
                <div class="progress-indicator flex" data-alignment="horizontal">
                  <div class="progress-indicator__step" *ngFor="let step of steps; let i = index">
                    <div class="progress-indicator__step-content flex-column">
                      <div class="step-label" [attr.data-state]="step.state">
                        <span class="step-label--circle">
                          <ng-container *ngIf="step.state === 'completed'; else notCompleted">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                              fill="none" color="currentColor">
                              <path d="M5 14L8.5 17.5L19 6.5" stroke="currentColor" stroke-linecap="round"
                                stroke-linejoin="round" stroke-width="1.5"></path>
                            </svg>
                          </ng-container>
                          <ng-template #notCompleted>
                            {{ i + 1 }}
                          </ng-template>
                        </span>
                      </div>
                      <div class="step-text flex-column text-md-medium fw-light text-nowrap text-right">
                        <span>{{ step.label }}</span>
                      </div>
                    </div>
                    <span class="progress-indicator__step-connector"
                      [ngClass]="{ 'progress-indicator__step-connector--active': step.state === 'completed' }"
                      *ngIf="i < steps.length - 1"></span>
                  </div>
                </div>
              </div>
              <div class="row mt-4">
                <div class="col-12">
                  <ng-container *ngFor="let step of steps">
                    <ng-container *ngIf="step.state === 'current' && !showTable">
                      <ng-container *ngComponentOutlet="step.component"></ng-container>
                    </ng-container>
                  </ng-container>
                </div>
              </div>
              <div *ngIf="showTable" class="table-wrapper table-contained mt-4">
                <table class="azm-table table-contained" style="direction: rtl;">
                  <thead>
                    <tr class="row-divider">
                      <th><span class="text">الرقم المرجعي</span></th>
                      <th><span class="text">وقت وتاريخ الموعد</span></th>
                      <th><span class="text">وقت وتاريخ الموعد بالهجري</span></th>
                      <th><span class="text">المهام</span></th>
    
                            <th><span><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"
                                        fill="none">
                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                            d="M3.12142 0.500001C3.13298 0.500002 3.14457 0.500002 3.15621 0.500002L10.8786 0.500001C11.3923 0.499977 11.8284 0.499957 12.1724 0.546869C12.5366 0.596523 12.8849 0.708609 13.1514 1.00207C13.4204 1.29809 13.494 1.65484 13.4996 2.01952C13.5049 2.36009 13.4505 2.78315 13.387 3.27641L13.3824 3.31233C13.3599 3.48688 13.3262 3.65571 13.256 3.82474C13.1847 3.99635 13.0865 4.14251 12.9643 4.28777C12.3111 5.06369 11.097 6.46593 9.38762 7.74293C9.35997 7.76358 9.32508 7.81254 9.31843 7.886C9.15235 9.72129 9.00625 10.6923 8.90085 11.2549C8.78687 11.8632 8.32284 12.2842 7.92276 12.5741C7.71339 12.7259 7.49115 12.8625 7.29321 12.9829C7.27734 12.9926 7.26166 13.0021 7.24618 13.0115C7.06127 13.124 6.90407 13.2196 6.77267 13.3125C6.41233 13.5673 5.99661 13.5494 5.67885 13.3643C5.37898 13.1896 5.16797 12.871 5.12531 12.5107C5.03167 11.7197 4.86191 10.1713 4.67451 7.88172C4.66849 7.80828 4.65702 7.78697 4.65607 7.7852C4.65541 7.78396 4.65372 7.78086 4.64812 7.7747C4.64186 7.76782 4.62935 7.75563 4.60557 7.73785C2.89968 6.46245 1.68788 5.06267 1.03567 4.28774C0.913868 4.14302 0.812806 4.00034 0.740748 3.82682C0.670207 3.65694 0.640128 3.48726 0.617626 3.31233C0.616081 3.30031 0.61454 3.28834 0.613004 3.2764C0.549526 2.78315 0.495082 2.36009 0.500354 2.01952C0.505998 1.65484 0.579613 1.29809 0.848536 1.00206C1.11512 0.708609 1.46335 0.596523 1.82753 0.546869C2.17161 0.499957 2.60771 0.499977 3.12142 0.500001ZM1.96263 1.5377C1.70656 1.57261 1.62942 1.62966 1.58871 1.67447C1.55034 1.71672 1.50401 1.7911 1.50023 2.03499C1.49621 2.29475 1.54008 2.64541 1.60945 3.18475C1.62873 3.33462 1.64562 3.39836 1.66429 3.44331C1.68144 3.48461 1.71182 3.53814 1.80076 3.64382C2.43961 4.40287 3.59231 5.7317 5.20436 6.93694C5.33387 7.03378 5.4527 7.15365 5.53866 7.31507C5.62336 7.47411 5.65803 7.63957 5.67117 7.80015C5.85755 10.0772 6.02609 11.6136 6.11837 12.3931C6.12119 12.4168 6.12984 12.4403 6.14316 12.4607C6.15679 12.4816 6.17192 12.4942 6.18222 12.5002C6.18353 12.501 6.18469 12.5016 6.18568 12.5021C6.18805 12.5008 6.19125 12.4989 6.19532 12.496C6.35673 12.3819 6.54407 12.268 6.72089 12.1606C6.73849 12.1499 6.75599 12.1393 6.77335 12.1287C6.97255 12.0075 7.16307 11.8897 7.33601 11.7644C7.70055 11.5002 7.87936 11.2767 7.91795 11.0707C8.01561 10.5495 8.15815 9.61205 8.3225 7.79587C8.35261 7.46311 8.51598 7.14587 8.78912 6.94181C10.4045 5.73502 11.5595 4.40381 12.1992 3.6438C12.2768 3.55163 12.3113 3.4922 12.3325 3.44107C12.3549 3.38735 12.3736 3.31626 12.3905 3.18475C12.4599 2.64541 12.5038 2.29475 12.4997 2.03499C12.496 1.7911 12.4496 1.71672 12.4113 1.67447C12.3706 1.62966 12.2934 1.57261 12.0374 1.5377C11.7689 1.5011 11.4018 1.5 10.8438 1.5H3.15621C2.59818 1.5 2.23107 1.5011 1.96263 1.5377ZM6.18044 12.5044C6.18046 12.5044 6.18079 12.5042 6.18141 12.5041L6.18044 12.5044Z"
                                            fill="#161616" />
                                    </svg></span></th>
    
                    </tr>
                  </thead>
                  <tbody>
                    <tr class="row-divider alternate text-right" *ngFor="let row of rows">
                      <td colspan="1">خلية</td>
                      <td colspan="1">خلية</td>
                      <td colspan="1">خلية</td>
                      <td colspan="1">
                        <a class="link link--lg link--brand mt-4 mb-12 pb-12">
                          <span class="link__label">رابط</span>
                        </a>
                      </td>
                      <td colspan="1">
                        <a href="#">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="10" viewBox="0 0 16 10"
                            fill="none">
                            <path
                              d="M15.2914 4.99957C15.2914 4.68827 15.1533 4.39947 15.0226 4.18261C14.8815 3.9486 14.6918 3.707 14.4837 3.47143C14.0662 2.99887 13.5215 2.49139 12.9928 2.03233C12.4611 1.57058 11.9312 1.1454 11.5353 0.836422C11.3371 0.681674 11.1717 0.555478 11.0555 0.467718C10.9974 0.423827 10.9516 0.389517 10.92 0.366022L10.8837 0.339034L10.8741 0.331906L10.8708 0.32944C10.5928 0.124721 10.2012 0.183797 9.99651 0.461715C9.7918 0.739621 9.85112 1.13085 10.129 1.33558L10.1396 1.34342L10.173 1.36823C10.2025 1.39023 10.2462 1.42293 10.302 1.46511C10.4137 1.54949 10.5738 1.67165 10.7662 1.82179C11.1516 2.1226 11.6633 2.53335 12.1732 2.97614C12.6863 3.42163 13.1832 3.88732 13.5469 4.29905C13.5699 4.32509 13.5922 4.35068 13.6137 4.37581L1.33301 4.37582C0.98783 4.37582 0.708008 4.65564 0.708008 5.00082C0.708008 5.34599 0.98783 5.62582 1.33301 5.62582L13.6116 5.62581C13.5907 5.65015 13.5692 5.67492 13.5469 5.70011C13.1832 6.11184 12.6863 6.57753 12.1732 7.02302C11.6633 7.46582 11.1516 7.87656 10.7662 8.17737C10.5738 8.32751 10.4137 8.44968 10.302 8.53405C10.2462 8.57623 10.2025 8.60893 10.173 8.63093L10.1396 8.65574L10.129 8.66358C9.85112 8.86831 9.7918 9.25954 9.99651 9.53745C10.2012 9.81537 10.5928 9.87444 10.8708 9.66972L10.8741 9.66726L10.8837 9.66013L10.92 9.63314C10.9516 9.60965 10.9974 9.57534 11.0555 9.53144C11.1717 9.44368 11.3371 9.31749 11.5353 9.16274C11.9312 8.85376 12.4611 8.42859 12.9928 7.96683C13.5215 7.50778 14.0662 7.00029 14.4837 6.52773C14.6918 6.29217 14.8815 6.05056 15.0226 5.81655C15.1525 5.60099 15.2897 5.31434 15.2913 5.00518"
                              fill="#161616" />
                          </svg>
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="mt-4 mb-12 pb-12">
                <button class="btn btn--md btn--secondary mr-2" (click)="previousStep()"
                  [disabled]="currentStepIndex === 0">السابق</button>
                <button class="btn btn--md btn--primary-brand px-4" (click)="nextStep()"
                  [disabled]="currentStepIndex === steps.length - 1">التالي</button>
              </div>
              <app-choose-service-dialog *ngIf="showDialog" (close)="onDialogClose()"
                (confirm)="onDialogConfirm()"></app-choose-service-dialog>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>